# ============================================================
# Dev config:  ~1 vCPU, 4 GiB RAM
# ============================================================

# System
timezone                    = 'UTC'

# Connection
listen_addresses            = '*'      
port                        = 5432
ssl                         = off
max_connections             = 120       # (pool_size+max_overflow) * workers * instance

# Memory settings
shared_buffers              = '1GB'    # ~25% of RAM
effective_cache_size        = '3GB'    # planner hint (~75% of RAM)
work_mem                    = '16MB'   # per sort/hash operation
maintenance_work_mem        = '256MB'  # VACUUM, CREATE INDEX, etc.

# WAL / checkpoints (dev)
max_wal_size                = '1GB'
checkpoint_timeout          = '10min'

# Extensions: pg_stat_statements
shared_preload_libraries    = 'pg_stat_statements'
# pg_stat_statements tuning
pg_stat_statements.max      = 5000     # number of distinct statements tracked
pg_stat_statements.track    = 'all'    # track all statements
pg_stat_statements.save     = on       # persist stats across restarts

# Logging / debugging
log_min_duration_statement  = '250ms' # log queries slower than 250ms
log_checkpoints             = on
log_autovacuum_min_duration = '1000ms'

# Track I/O timing for deeper performance analysis
track_io_timing             = on
